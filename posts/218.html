<!DOCTYPE html><html lang="en"><head><title>Moving Beyond the OOP Obsession</title><link rel="alternate" type="application/atom+xml" title="Atom feed" href="atom.xml"><meta name="viewport" content="width=device-width,initial-scale=1"><style>a,#p21{text-decoration:none}a:link{color:#00D}a:visited{color:purple}a:hover{text-decoration:underline}body,div{margin:0;padding:0;box-sizing:border-box}body{font:100%/1.5 verdana;color:#222}p,ul,blockquote,pre{margin:0 0 1em}ul{list-style:none;padding-left:1em;text-indent:-1em}h1,h2{font:700 1.27em verdana;margin:0 0 .5em}h1{color:#117}blockquote{font-style:italic}pre,code{font:700 1em "courier new",monospace}pre{overflow:auto}.box{margin:0 auto;padding:0 12px}.s{font:.91em/1.4 verdana}.ab a{display:block;margin:0 0 1em;padding-left:1em;text-indent:-1em}#top{background:#117;color:#FFF;margin:0 0 .67em;border:0 solid #7373D9;border-width:0 0 12px;padding:2em 0 0}#p21{font:700 2.5em georgia;color:#FFF}#perm{color:#222;background:#DDD;border:1px solid #BBB;padding:2px}@media screen and (min-width:768px){blockquote,pre{margin-left:1.25em}.box{max-width:840px}#c1{width:71%;float:left}#c2{width:26%;float:right}}</style></head><body><div id="top"><div class="box"><a id="p21" href="/">programming in&nbsp;the<br>twenty-first century</a><p>It's not about technology for its own sake. It's about being able to implement your ideas.</p></div></div><div class="box"><div id="c1"><h1>Moving Beyond the OOP Obsession</h1><p>Articles pointing out the foibles of an object-oriented programming style appear regularly, and I'm as <a href="93.html">guilty</a> as anyone. But all this anecdotal evidence against OOP doesn't have much effect. It's still the standard taught in universities and the go-to technique for most problems.</p><p>The first major OO language for PCs was Borland Turbo Pascal 5.5, introduced in 1989. Oh, sure, there were a few C++ compilers before that, but Turbo Pascal was <i>the</i> language for MS-DOS in the 1980s, so it was the first exposure to OOP for many people. In Borland's magazine ads, inheritance was touted as the big feature, with an example of how different variants of a sports car could be derived from a base model. What the ads didn't mention at all was encapsulation or modularity, because Turbo Pascal programmers already knew how to do that in earlier, pre-object versions of the language.</p><p>In the years since then, the situation has reversed. Inheritance is now the iffiest part of the object-oriented canon, while modularity is everything. In OOP-first curricula, objects are taught as <i>the</i> method of achieving modularity, to the point where the two have become synonymous. It occurred to me that there are now a good many coders who've never stopped to think about how modularity and encapsulation could work in C++ without using classes, so that's what I want to do now.</p><p>Here's a classic C++ method call for an instance of a class called <code>mixer</code>:</p><pre>m-&gt;set_volume(0.8);</pre><p><code>m</code> is a pointer to instance of the <code>mixer</code> class. <code>set_volume</code> is the method being called. Now here's what this would look like in C++ without using objects:</p><pre>mixer_set_volume(m, 0.8);</pre><p>This is in a file called <code>mixer.cpp</code>, where all the functions have the <code>mixer_</code> prefix and take a pointer (or reference) to a variable of the <code>mixer</code> type. Instead of <code>new mixer</code> you call <code>mixer_new</code>. It might take a moment to convince yourself, but barring some small details, these two examples are the same thing. You don't need OOP to do basic encapsulation.</p><p>(If you're curious, the pre-object Turbo Pascal version is almost the same:</p><pre>mixer.set_volume(m, 0.8);</pre><p><code>mixer</code> is not an object, but the name of the module, and the dot means that the following identifier is inside that module.)</p><p>Now the C++ <code>mixer_set_volume</code> example above is slightly longer than the class version, which I expect will bother some people. The mild verbosity is not a bad thing, because you can do simple text searches to find everywhere that <code>mixer_set_volume</code> is used. There is no confusion from multiple classes having the same methods. But if you insist, this is easy to remedy by making it an overloaded function where the first parameter is always of type <code>mixer</code>. Now you can simply say:</p><pre>set_volume(m, 0.8);</pre><p>I expect there are some people waiting to tell me I'm oversimplifying things, and I know perfectly well that I'm avoiding virtual functions and abstract base classes. That's more or less my point: that while simple, this covers the majority of use cases for objects, so <i>teach it first</i> without having the speed bump of terminology that comes with introducing OOP proper.</p><p>To extend my example a bit more, what if "mixer" is something that there can only be one of, because it's closely tied to the audio hardware? Just remove the first parameter to all the function calls, and you end up with:</p><pre>mixer_set_volume(0.8);</pre><p>You can teach this without ever using the word "singleton."</p><p>(You might enjoy <a href="93.html">Part 1</a> and <a href="156.html">Part 2</a> of this unintentional trilogy.)</p><p class="s"><a href="218.html" id="perm">permalink</a> <i>March 27, 2016</i></p><h1>previously</h1><ul><li><a href=217.html>On the Madness of Optimizing Compilers</a><li><a href=216.html>Messy Structs/Classes in a Functional Style</a><li><a href=215.html>What's Your Secondary Language?</a><li><a href=214.html>The Same User Interface Mistakes Over and Over</a><li><a href=213.html>Alternate Retrocomputing Histories</a></ul></div><div id="c2"><h1><a href="archives.html">archives</a></h1><p><b><a href="https://twitter.com/dadgumjames">twitter</a></b> / <b><a href="mailto:james.hague@gmail.com">mail</a></b></p><div class="s"><p>I'm James Hague, a <a href="56.html">recovering programmer</a> who has been designing video games since the 1980s. <a href="195.html">Programming Without Being Obsessed With Programming</a> and <a href="177.html">Organizational Skills Beat Algorithmic Wizardry</a> are good starting points. For the older stuff, try the <a href="162.html">2012 Retrospective</a>.</p><p>Where are <a href="57.html">the comments</a>?</p></div></div></div>