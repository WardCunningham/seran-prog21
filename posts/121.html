<!DOCTYPE html><html lang="en"><head><title>A Programming Idiom You've Never Heard Of</title><link rel="alternate" type="application/atom+xml" title="Atom feed" href="atom.xml"><meta name="viewport" content="width=device-width,initial-scale=1"><style>a,#p21{text-decoration:none}a:link{color:#00D}a:visited{color:purple}a:hover{text-decoration:underline}body,div{margin:0;padding:0;box-sizing:border-box}body{font:100%/1.5 verdana;color:#222}p,ul,blockquote,pre{margin:0 0 1em}ul{list-style:none;padding-left:1em;text-indent:-1em}h1,h2{font:700 1.27em verdana;margin:0 0 .5em}h1{color:#117}blockquote{font-style:italic}pre,code{font:700 1em "courier new",monospace}pre{overflow:auto}.box{margin:0 auto;padding:0 12px}.s{font:.91em/1.4 verdana}.ab a{display:block;margin:0 0 1em;padding-left:1em;text-indent:-1em}#top{background:#117;color:#FFF;margin:0 0 .67em;border:0 solid #7373D9;border-width:0 0 12px;padding:2em 0 0}#p21{font:700 2.5em georgia;color:#FFF}#perm{color:#222;background:#DDD;border:1px solid #BBB;padding:2px}@media screen and (min-width:768px){blockquote,pre{margin-left:1.25em}.box{max-width:840px}#c1{width:71%;float:left}#c2{width:26%;float:right}}</style></head><body><div id="top"><div class="box"><a id="p21" href="/">programming in&nbsp;the<br>twenty-first century</a><p>It's not about technology for its own sake. It's about being able to implement your ideas.</p></div></div><div class="box"><div id="c1"><h1>A Programming Idiom You've Never Heard Of</h1><p>Here are some sequences of events:</p><blockquote><p>Take the rake out of the shed, use it to pile up the leaves in the backyard, then put the rake back in the shed.</p><p>Fly to Seattle, see the sights, then fly home.</p><p>Put the key in the door, open it, then take the key out of the door.</p><p>Wake-up your phone, check the time, then put it back to sleep.</p></blockquote><p>See the pattern? You do something, then do something else, then you undo the first thing. Or more accurately, the last step is the inverse of the first. Once you're aware of this pattern, you'll see it everywhere. Pick up the cup, take a sip of coffee, put the cup down. And it's all over the place in code, too:</p><blockquote><p>Open a file, read the contents, close the file.</p><p>Allocate a block of memory, use it for something, free it.</p><p>Load the contents of a memory address into a register, modify it, store it back in memory.</p></blockquote><p>While this is easy to explain and give examples of, it's not simple to implement. All we want is an operation that looks like <code>idiom(Function1, Function2)</code>, so we could write the "open a file..." example above as <code>idiom(Open, Read)</code>. The catch is that there needs to be a programmatic way to determine that the inverse of "open" is "close." Is there a programming languages where functions have inverses?</p><p>Surprisingly, yes: <a href="http://jsoftware.com">J</a>. And this idiom I keep talking about is even a built-in function in J, called <i>under</i>. In English, and not J's terse syntax, the open file example is stated as "read under open."</p><p>One non-obvious use of "under" in J is to compute the magnitude of a vector. Magnitude is an easy algorithm: square each component, sum them up, then take the square root of the result. Hmmm...the third step is the inverse of the first. Sum under square. Or in actual J code:</p><pre>mag =: +/ &amp;.: *:</pre><p><code>+/</code> is "sum." The ampersand, period, colon sequence is "under." And <code>*:</code> is "square."</p><p>(Also see the <a href="122.html">follow-up</a >.)</p><p class="s"><a href="121.html" id="perm">permalink</a> <i>January 3, 2012</i></p><h1>previously</h1><ul><li><a href=120.html>2011 Retrospective</a><li><a href=119.html>User Experience Intrusions in iOS 5</a><li><a href=118.html>Photography as a Non-Technical Hobby</a><li><a href=117.html>Adventures in Unfiltered Global Publishing</a><li><a href=116.html>Things That Turbo Pascal is Smaller Than</a></ul></div><div id="c2"><h1><a href="archives.html">archives</a></h1><p><b><a href="https://twitter.com/dadgumjames">twitter</a></b> / <b><a href="mailto:james.hague@gmail.com">mail</a></b></p><div class="s"><p>I'm James Hague, a <a href="56.html">recovering programmer</a> who has been designing video games since the 1980s. <a href="195.html">Programming Without Being Obsessed With Programming</a> and <a href="177.html">Organizational Skills Beat Algorithmic Wizardry</a> are good starting points. For the older stuff, try the <a href="162.html">2012 Retrospective</a>.</p><p>Where are <a href="57.html">the comments</a>?</p></div></div></div>