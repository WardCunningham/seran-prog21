<!DOCTYPE html><html lang="en"><head><title>Follow-up to "A Programming Idiom You've Never Heard Of"</title><link rel="alternate" type="application/atom+xml" title="Atom feed" href="atom.xml"><meta name="viewport" content="width=device-width,initial-scale=1"><style>a,#p21{text-decoration:none}a:link{color:#00D}a:visited{color:purple}a:hover{text-decoration:underline}body,div{margin:0;padding:0;box-sizing:border-box}body{font:100%/1.5 verdana;color:#222}p,ul,blockquote,pre{margin:0 0 1em}ul{list-style:none;padding-left:1em;text-indent:-1em}h1,h2{font:700 1.27em verdana;margin:0 0 .5em}h1{color:#117}blockquote{font-style:italic}pre,code{font:700 1em "courier new",monospace}pre{overflow:auto}.box{margin:0 auto;padding:0 12px}.s{font:.91em/1.4 verdana}.ab a{display:block;margin:0 0 1em;padding-left:1em;text-indent:-1em}#top{background:#117;color:#FFF;margin:0 0 .67em;border:0 solid #7373D9;border-width:0 0 12px;padding:2em 0 0}#p21{font:700 2.5em georgia;color:#FFF}#perm{color:#222;background:#DDD;border:1px solid #BBB;padding:2px}@media screen and (min-width:768px){blockquote,pre{margin-left:1.25em}.box{max-width:840px}#c1{width:71%;float:left}#c2{width:26%;float:right}}</style></head><body><div id="top"><div class="box"><a id="p21" href="/">programming in&nbsp;the<br>twenty-first century</a><p>It's not about technology for its own sake. It's about being able to implement your ideas.</p></div></div><div class="box"><div id="c1"><h1>Follow-up to "A Programming Idiom You've Never Heard Of"</h1><p>Lots of mail, lots of online discussion about <a href="121.html">A Programming Idiom You've Never Heard Of</a>, so I wanted to clarify a few things.</p><p>What I was trying to do was get across the unexpected strangeness of function inverses in a programming language. In that short definition of vector magnitude, there wasn't a visible square root function. There was only an operator for squaring a value, and another operator that involved inverting a function.</p><p>How does the J interpreter manage to determine a function inverse at runtime? For many primitives, there's an associated inverse. The inverse of add is subtract. The inverse of increment is decrement. For some primitives there isn't a true, mathematical inverse, but a counterpart that's often useful. That's why the preferred term in J isn't inverse, but <a href="http://dictionary.reference.com/browse/obverse">obverse</a>.</p><p>For user-defined functions, there's an attempt at inversion (er, obversion) that works much of the time. A function that reverses a list then adds five to each element turns into a function that subtracts five from each element then reverses the list. For cases where the automated obverse doesn't work, or where you want the obverse to have different behavior, you can associate a user-defined obverse with any verb (J lingo for function). You could define an <code>open_file</code> verb which opens a file and has an obverse that closes a file. Or in actual J:</p><pre>open_file =: open :. close</pre><p>Well, really, that should be:</p><pre>open_file =: (1!:21) :. (1!:22)</pre><p>But the former, without the explicit foreign function calls, gets the point across clearer, I think.</p><p>One common use of obverses and the "under" operator is for boxing and unboxing values. In J, a list contains values of the same type. There's no mixing of integers and strings like Lisp or Python. Instead you can "box" a value, then have a list containing only boxed values. But there's nothing you can do with a boxed value except unbox it, so it's common to say "[some operation] under open box," like "increment under open box." That means unbox the value, increment it, then put it back in a box. Or in real, eyeball-melting J:</p><pre>inc_box =: &gt;: &amp;. &gt;</pre><p>The <code>&gt;:</code> is increment. The right <code>&gt;</code> means open box. That's the "under" operation in the middle.</p><p>Now it sounds like this "open box, do something, close box" sequence would translate beautifully to the "open file, read the contents, close the file" example I gave last time, but it doesn't. The catch is that the open / read / close verbs aren't manipulating a single input the way <code>inc_box</code> is. Opening a file returns a handle, which gets passed to <code>read</code>. But reading a file returns the <i>contents</i> of the file, which is not something that can be operated on by <code>close</code>. So this definition won't work:</p><pre>read_file =: read &amp;. open</pre><p>If a structured data type like a dictionary was being passed around, then okay, but that's not a pretty example like I hoped it would be.</p><p>Still, I encourage learning <a href="http://jsoftware.com">J</a>, if only to make every other language seem easy.</p><p class="s"><a href="122.html" id="perm">permalink</a> <i>January 5, 2012</i></p><h1>previously</h1><ul><li><a href=121.html>A Programming Idiom You've Never Heard Of</a><li><a href=120.html>2011 Retrospective</a><li><a href=119.html>User Experience Intrusions in iOS 5</a><li><a href=118.html>Photography as a Non-Technical Hobby</a><li><a href=117.html>Adventures in Unfiltered Global Publishing</a></ul></div><div id="c2"><h1><a href="archives.html">archives</a></h1><p><b><a href="https://twitter.com/dadgumjames">twitter</a></b> / <b><a href="mailto:james.hague@gmail.com">mail</a></b></p><div class="s"><p>I'm James Hague, a <a href="56.html">recovering programmer</a> who has been designing video games since the 1980s. <a href="195.html">Programming Without Being Obsessed With Programming</a> and <a href="177.html">Organizational Skills Beat Algorithmic Wizardry</a> are good starting points. For the older stuff, try the <a href="162.html">2012 Retrospective</a>.</p><p>Where are <a href="57.html">the comments</a>?</p></div></div></div>