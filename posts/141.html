<!DOCTYPE html><html lang="en"><head><title>Another Programming Idiom You've Never Heard Of</title><link rel="alternate" type="application/atom+xml" title="Atom feed" href="atom.xml"><meta name="viewport" content="width=device-width,initial-scale=1"><style>a,#p21{text-decoration:none}a:link{color:#00D}a:visited{color:purple}a:hover{text-decoration:underline}body,div{margin:0;padding:0;box-sizing:border-box}body{font:100%/1.5 verdana;color:#222}p,ul,blockquote,pre{margin:0 0 1em}ul{list-style:none;padding-left:1em;text-indent:-1em}h1,h2{font:700 1.27em verdana;margin:0 0 .5em}h1{color:#117}blockquote{font-style:italic}pre,code{font:700 1em "courier new",monospace}pre{overflow:auto}.box{margin:0 auto;padding:0 12px}.s{font:.91em/1.4 verdana}.ab a{display:block;margin:0 0 1em;padding-left:1em;text-indent:-1em}#top{background:#117;color:#FFF;margin:0 0 .67em;border:0 solid #7373D9;border-width:0 0 12px;padding:2em 0 0}#p21{font:700 2.5em georgia;color:#FFF}#perm{color:#222;background:#DDD;border:1px solid #BBB;padding:2px}@media screen and (min-width:768px){blockquote,pre{margin-left:1.25em}.box{max-width:840px}#c1{width:71%;float:left}#c2{width:26%;float:right}}</style></head><body><div id="top"><div class="box"><a id="p21" href="/">programming in&nbsp;the<br>twenty-first century</a><p>It's not about technology for its own sake. It's about being able to implement your ideas.</p></div></div><div class="box"><div id="c1"><h1>Another Programming Idiom You've Never Heard Of</h1><p>New programmers quickly pick-up how array indexing works. You fetch an element like this: <code>array[3]</code>. (More experienced folks can amuse themselves with the equally valid <code>3[array]</code> in C.) Now here's a thought: what if you could fetch multiple values at the same time and the result was a new array?</p><p>Let's say the initial array is this:</p><pre>10 5 9 6 20 17 1</pre><p>Fetching the values at indices 0, 1, 3, and 6, gives:</p><pre>10 5 6 1</pre><p>In the <a href="http://jsoftware.com">J language</a> you can actually do this, though the syntax likely isn't familiar:</p><pre>0 1 3 6 { 10 5 9 6 20 17 1</pre><p>The list of indices is on the left, and the original array on the right. That awkwardly unmatched brace is the index operator. (You can also achieve the same end in the R language, if you prefer.)</p><p>This may seem like a frivolous extension to something you already knew how to do, but all of a sudden things have gotten interesting. Now indexing can be used for more than just indexing. For example, you can delete elements by omitting indices. This drops the first two elements:</p><pre>2 3 4 5 6 { 10 5 9 6 20 17 1</pre><p>Or how about reversing an array without needing a special primitive:</p><pre>6 5 4 3 2 1 0 { 10 5 9 6 20 17 1</pre><p>This last case is particularly significant, because the indices specify a permutation of the original array. Arrange the indices however you want, and you can transform an array to that order.</p><p>In J, there's an operator that's like a sort, except the result specifies a permutation: a list of where each element should go. Using the same "10 5 9..." array, that first element should be in position 4, the value 5 should be in position 1, and so on. Here's the whole array of permuted indices.</p><pre>6 1 3 2 0 5 4</pre><p>What good is that? If you use that list of indices on the left side of the "{" operator with the original array on the right, you sort the array:</p><pre>6 1 3 2 0 5 4 { 10 5 9 6 20 17 1</pre><p>Now imagine you've got two other parallel arrays that you want to keep in sync with the sorted one. All you do is use that same "sorted permutation" array to index into each of the other arrays, and you're done.</p><p>(If you liked this, you might enjoy the original <a href="121.html">A Programming Idiom You've Never Heard Of</a>.)</p><p class="s"><a href="141.html" id="perm">permalink</a> <i>June 6, 2012</i></p><h1>previously</h1><ul><li><a href=140.html>The Pace of Technology is Slower than You Think</a><li><a href=139.html>We Who Value Simplicity Have Built Incomprehensible Machines</a><li><a href=138.html>You, Too, Can Be on the Cutting Edge of Functional Programming Research</a><li><a href=137.html>The Most Important Decisions are Non-Technical</a><li><a href=136.html>A Forgotten Principle of Compiler Design</a></ul></div><div id="c2"><h1><a href="archives.html">archives</a></h1><p><b><a href="https://twitter.com/dadgumjames">twitter</a></b> / <b><a href="mailto:james.hague@gmail.com">mail</a></b></p><div class="s"><p>I'm James Hague, a <a href="56.html">recovering programmer</a> who has been designing video games since the 1980s. <a href="195.html">Programming Without Being Obsessed With Programming</a> and <a href="177.html">Organizational Skills Beat Algorithmic Wizardry</a> are good starting points. For the older stuff, try the <a href="162.html">2012 Retrospective</a>.</p><p>Where are <a href="57.html">the comments</a>?</p></div></div></div>